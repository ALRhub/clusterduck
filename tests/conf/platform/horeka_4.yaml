# @package _global_

defaults:
  - override /hydra/launcher: clusterduck_slurm
  - _self_

platform_name: horeka
hydra:
  mode: MULTIRUN
  launcher:
    # launcher/cluster specific options
    timeout_min: 30
    submitit_folder: ${hydra.sweep.dir}/submitit
    partition: accelerated
    gres: gpu:4
    tasks_per_node: 4
    additional_parameters:
      # cpus-per-task: 38  # optional, because Horeka ignores this
      gpus-per-task: 1
      mem-per-gpu: 120G
    srun_args:
      - "--cpus-per-task=38"  # horeka ignores the job-level setting "cpus-per-task", so it must be set at the job step level
      - "--exclusive"  # ensures that resources allocated to job steps are exclusive, implies --exact

    # clusterduck specific options
    parallel_runs_per_node: 4
    total_runs_per_node: 4
    wait_for_completion: False
    resources_config:
      cpu:
      cuda:
      rendering:
